<div *ngIf="breakpoint$ | async as breakpoint">

<!--  <div class="menu-button-wrapper" *ngIf="(breakpoint$ | async) != breakpoints.MOBILE">-->
  <div class="menu-button-wrapper" [class.mobile-button-wrapper]="breakpoint === breakpoints.MOBILE">
    <div class="button-label">Search Type</div>
    <div>
      <button
        [matMenuTriggerFor]="searchTypeMenu"
        class="button-menu-trigger" color="basic"
        matTooltip="{{ searchType }}"
        mat-button>
        <div class="button-text">
          {{ searchType }}
          <span class="mat-select-arrow"></span>
        </div>
      </button>
      <div class="hr-wrapper"><hr class="text-underline"></div>
    </div>
  </div>

  <div class="gtm-search-type-selector" fxFlex="nogrow">

    <mat-menu #searchTypeMenu="matMenu" [(ngModel)]="searchType">
      <div *ngIf="(breakpoint$ | async) === breakpoints.MOBILE">
<!--        <mat-form-field class="formField" [matMenuTriggerFor]="searchTypeMenu">-->
<!--          <mat-label>Search Type</mat-label>-->
<!--          <mat-select class="gtm-search-type selectOptions"-->
<!--            [(ngModel)]="searchType"-->
<!--            (selectionChange)="onSetSearchType($event.value)">-->
<!--            <mat-option [value]="searchTypes.DATASET" class="matOption">Geographic</mat-option>-->
<!--            <mat-option [value]="searchTypes.LIST">List</mat-option>-->
<!--            <mat-option [value]="searchTypes.BASELINE">Baseline</mat-option>-->
<!--            <mat-option [value]="searchTypes.SBAS">SBAS</mat-option>-->
<!--            <mat-option [value]="searchTypes.SARVIEWS_EVENTS">Event</mat-option>-->
<!--            <mat-option-->
<!--              [value]="searchTypes.CUSTOM_PRODUCTS"-->
<!--              [disabled]="!isLoggedIn">-->
<!--                On Demand Products-->
<!--            </mat-option>-->
<!--            <div class="mat-option" [matMenuTriggerFor]="derivedDatasetMenu">Derived Datasets...</div>-->
<!--          </mat-select>-->
<!--        </mat-form-field>-->

          <button mat-menu-item (click)="onSetSearchType(searchTypes.DATASET)" class="mat-menu-item mobile-search-item">Geographic</button>
          <button mat-menu-item (click)="onSetSearchType(searchTypes.LIST)" class="mat-menu-item mobile-search-item">List</button>
          <button mat-menu-item (click)="onSetSearchType(searchTypes.BASELINE)" class="mat-menu-item mobile-search-item">Baseline</button>
          <button mat-menu-item (click)="onSetSearchType(searchTypes.SBAS)" class="mat-menu-item mobile-search-item">SBAS</button>
          <button mat-menu-item (click)="onSetSearchType(searchTypes.SARVIEWS_EVENTS)" class="mat-menu-item mobile-search-item">Event</button>
          <button mat-menu-item (click)="onSetSearchType(searchTypes.CUSTOM_PRODUCTS)" [disabled]="!isLoggedIn" class="mat-menu-item mobile-search-item">On Demand Products</button>
      </div>

      <div *ngIf="(breakpoint$ | async) != breakpoints.MOBILE">

        <div class="menu-item mat-menu-item" (click)="onSetSearchType(searchTypes.DATASET)">
          <div fxFlex="70%" class="menu-item-content">
            <div class="item-title">
              Geographic
            </div>
            <div class="item-content" [ngClass]="{'limitTextHeight': isReadMore}">
              Geographic search allows you to search for data based upon a geographic location.
            </div>
            <mat-card-actions>
              <app-docs-modal class="info-text"
                              text="More info"
                              url="https://docs.asf.alaska.edu/vertex/manual/#geographic-search-options">
              </app-docs-modal>
            </mat-card-actions>
          </div>
          <div fxFlex="30%" class="menu-item-aside">
            <span class="material-icons-outlined menu-item-icon">travel_explore</span>
          </div>
        </div>

        <hr class="dataset-hr">

        <div class="menu-item mat-menu-item" (click)="onSetSearchType(searchTypes.LIST)">
          <div fxFlex="70%" class="menu-item-content">
            <div class="item-title">
              List
            </div>
            <div class="item-content" [ngClass]="{'limitTextHeight': isReadMore}">
              List search allows you to enter or upload a list of scene or file names.
            </div>
            <mat-card-actions>
              <app-docs-modal class="info-text"
                              text="More info"
                              url="https://docs.asf.alaska.edu/vertex/manual/#list-search-options">
              </app-docs-modal>
            </mat-card-actions>
          </div>
          <div fxFlex="30%" class="menu-item-aside">
            <span class="material-icons-outlined menu-item-icon">list</span>
          </div>
        </div>

        <hr class="dataset-hr">

        <div class="menu-item mat-menu-item" (click)="onSetSearchType(searchTypes.BASELINE)">
          <div fxFlex="70%" class="menu-item-content">
            <div class="item-title">
              Baseline
            </div>
            <div class="item-content" [ngClass]="{'limitTextHeight': isReadMore}">
              Baseline search provides visualization of perpendicular and temporal baseline data for a chosen
              reference scene.
            </div>
            <mat-card-actions>
              <app-docs-modal class="info-text"
                              text="More info"
                              url="https://docs.asf.alaska.edu/vertex/manual/#baseline-search-options">
              </app-docs-modal>
            </mat-card-actions>
          </div>
          <div fxFlex="30%" class="menu-item-aside">
            <img src="assets/icons/baseline-chart.jpg" class="menu-item-icon">
          </div>
        </div>

        <hr class="dataset-hr">

        <div class="menu-item mat-menu-item" (click)="onSetSearchType(searchTypes.SBAS)">
          <div fxFlex="70%" class="menu-item-content">
            <div class="item-title">
              SBAS
            </div>
            <div class="item-content" [ngClass]="{'limitTextHeight': isReadMore}">
              SBAS search provides perpendicular and temporal baseline data, as well as scene pairs, for a chosen
              reference scene.
            </div>
            <mat-card-actions>
              <app-docs-modal class="info-text"
                              text="More info"
                              url="https://docs.asf.alaska.edu/vertex/manual/#sbas-search-options">
              </app-docs-modal>
            </mat-card-actions>
          </div>
          <div fxFlex="30%" class="menu-item-aside">
            <img src="assets/icons/sbas-chart.jpg" class="menu-item-icon">
          </div>
        </div>

        <hr class="dataset-hr">

        <div class="menu-item mat-menu-item" (click)="onSetSearchType(searchTypes.SARVIEWS_EVENTS)">
          <div fxFlex="70%" class="menu-item-content">
            <div class="item-title">
              Event
            </div>
            <div class="item-content" [ngClass]="{'limitTextHeight': isReadMore}">
              Event search harnesses the capabilities of SAR processing to monitor natural disasters.
            </div>
            <mat-card-actions>
              <app-docs-modal class="info-text"
                              text="More info"
                              url="https://docs.asf.alaska.edu/vertex/manual/#event-search-options">
              </app-docs-modal>
            </mat-card-actions>
          </div>
          <div fxFlex="30%" class="menu-item-aside">
            <span class="material-icons-outlined menu-item-icon">volcano</span>
          </div>
        </div>

        <hr class="dataset-hr">

        <div class="menu-item mat-menu-item" (click)="onSetSearchType(searchTypes.CUSTOM_PRODUCTS)">
          <div fxFlex="70%" class="menu-item-content">
            <div class="item-title">
              On Demand Products
            </div>
            <div class="item-content" [ngClass]="{'limitTextHeight': isReadMore}">
              On Demand search allows you to view your submitted On Demand jobs.
            </div>
            <mat-card-actions>
              <app-docs-modal class="info-text"
                              text="More info"
                              url="https://docs.asf.alaska.edu/vertex/manual/#on-demand-products-search-options">
              </app-docs-modal>
            </mat-card-actions>
          </div>
          <div fxFlex="30%" class="menu-item-aside">
            <img src="assets/asf-logos/HyP3-graphic-only.png" class="menu-item-icon">
          </div>
        </div>

        <hr class="dataset-hr">

        <div mat-menu-item class="menu-item mat-menu-item" [matMenuTriggerFor]="derivedDatasetMenu">
          <div fxFlex="70%" class="menu-item-content">
            <div class="item-title">
              Derived Datasets
            </div>
            <div class="item-content" [ngClass]="{'limitTextHeight': isReadMore}">
              Derived datasets contain a collection of datasets available to view and download.
            </div>
            <mat-card-actions>
              <app-docs-modal class="info-text"
                              text="More info"
                              url="https://docs.asf.alaska.edu/vertex/manual/#area-of-interest-options">
              </app-docs-modal>
            </mat-card-actions>
          </div>
          <div fxFlex="30%" class="menu-item-aside">
            <span class="material-icons-outlined menu-item-icon">dataset_linked</span>
          </div>
        </div>

      </div>

    </mat-menu>

    <mat-menu #derivedDatasetMenu="matMenu">
      <div mat-menu-item matSuffix *ngFor="let dataset of datasets">
        <div *ngIf="(breakpoint$ | async) === breakpoints.MOBILE">
          <mat-icon>video_library</mat-icon>
          {{ dataset.name }}
        </div>
        <div *ngIf="(breakpoint$ | async) != breakpoints.MOBILE" class="menu-item">
          <div fxFlex="70%" class="menu-item-content">
            <div class="item-title" (click)="onOpenDerivedDataset(dataset.info_url, dataset.name)">
              {{ dataset.name }}
            </div>
            <div class="item-content" [ngClass]="{'limitTextHeight': isReadMore}">
              {{ dataset.info }}
            </div>
            <mat-card-actions>
              <button class="blue-link" (click)="onOpenDerivedDataset(dataset.info_url, dataset.name)" mat-button>More Info</button>
              <button class="blue-link" (click)="onOpenDerivedDataset(dataset.download_url, dataset.name)" mat-button>Download</button>
            </mat-card-actions>
          </div>
          <div fxFlex="30%" class="menu-item-aside">
            <img [src]="dataset.picture" class="menu-item-icon">
          </div>
        </div>
        <hr class="dataset-hr">
      </div>
    </mat-menu>

  </div>
</div>
