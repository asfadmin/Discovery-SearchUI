<div *ngIf="breakpoint$ | async as breakpoint">

  <div class="menu-button-wrapper" [class.mobile-button-wrapper]="breakpoint === breakpoints.MOBILE">
    <div class="button-label">Search Type</div>
    <div>
      <button
        [matMenuTriggerFor]="searchTypeMenu" (onMenuOpen)="onSearchTypeMenuOpen()"
        class="button-menu-trigger" color="basic"
        matTooltip="{{ searchType }}"
        mat-button>
        <div class="button-text">
          {{ searchType }}
          <span class="mat-select-arrow"></span>
        </div>
      </button>
      <div class="hr-wrapper"><hr class="text-underline"></div>
    </div>
  </div>

  <div class="gtm-search-type-selector fx-nogrow">
    <mat-menu #searchTypeMenu="matMenu" [(ngModel)]="searchType" name="searchType" id="searchMenu" ngDefaultControl>
      <div>
        <div id="firstItem" class="menu-item mat-menu-item" aria-selected="true"
             (click)="onSetSearchType(searchTypes.DATASET)">
          <div class="menu-item-inner">
            <div class="fx-75 menu-item-content">
              <div class="item-title">
                Geographic
              </div>
              <div class="item-content" [ngClass]="{'limitTextHeight': isReadMore}">
                Geographic search allows you to search for data based upon a geographic location.
              </div>
              <mat-card-actions>
                <app-docs-modal class="info-text"
                                text="More info"
                                url="https://docs.asf.alaska.edu/vertex/manual/#geographic-search-options">
                </app-docs-modal>
              </mat-card-actions>
            </div>
            <div class="fx-25 menu-item-aside">
              <span class="material-icons-outlined menu-item-icon">travel_explore</span>
            </div>
          </div>
        </div>

        <hr class="dataset-hr">

        <div class="menu-item mat-menu-item" (click)="onSetSearchType(searchTypes.LIST)">
          <div class="menu-item-inner">
            <div class="fx-75 menu-item-content">
              <div class="item-title">
                List
              </div>
              <div class="item-content" [ngClass]="{'limitTextHeight': isReadMore}">
                List search allows you to enter or upload a list of scene or file names.
              </div>
              <mat-card-actions (click)="onOpenDocs($event)">
                <app-docs-modal class="info-text"
                                text="More info"
                                url="https://docs.asf.alaska.edu/vertex/manual/#list-search-options">
                </app-docs-modal>
              </mat-card-actions>
            </div>
            <div class="fx-25 menu-item-aside">
              <span class="material-icons-outlined menu-item-icon">list</span>
            </div>
          </div>
        </div>

        <hr class="dataset-hr">

        <div class="menu-item mat-menu-item" (click)="onSetSearchType(searchTypes.BASELINE)">
          <div class="menu-item-inner">
            <div class="fx-75 menu-item-content">
              <div class="item-title">
                Baseline
              </div>
              <div class="item-content" [ngClass]="{'limitTextHeight': isReadMore}">
                Baseline search provides visualization of perpendicular and temporal baseline data for a chosen
                reference scene.
              </div>
              <mat-card-actions (click)="onOpenDocs($event)">
                <app-docs-modal class="info-text"
                                text="More info"
                                url="https://docs.asf.alaska.edu/vertex/manual/#baseline-search-options">
                </app-docs-modal>
              </mat-card-actions>
            </div>
            <div class="fx-25 menu-item-aside">
              <img src="assets/icons/baseline-chart.jpg" class="menu-item-icon">
            </div>
          </div>
        </div>

        <hr class="dataset-hr">

        <div class="menu-item mat-menu-item" (click)="onSetSearchType(searchTypes.SBAS)">
          <div class="menu-item-inner">
            <div class="fx-75 menu-item-content">
              <div class="item-title">
                SBAS
              </div>
              <div class="item-content" [ngClass]="{'limitTextHeight': isReadMore}">
                SBAS search provides perpendicular and temporal baseline data, as well as scene pairs, for a chosen
                reference scene.
              </div>
              <mat-card-actions (click)="onOpenDocs($event)">
                <app-docs-modal class="info-text"
                                text="More info"
                                url="https://docs.asf.alaska.edu/vertex/manual/#sbas-search-options">
                </app-docs-modal>
              </mat-card-actions>
            </div>
            <div class="fx-25 menu-item-aside">
              <img src="assets/icons/sbas-chart.jpg" class="menu-item-icon">
            </div>
          </div>
        </div>

        <hr class="dataset-hr">

        <div class="menu-item mat-menu-item" (click)="onSetSearchType(searchTypes.SARVIEWS_EVENTS)">
          <div class="menu-item-inner">
            <div class="fx-75 menu-item-content">
              <div class="item-title">
                Event
              </div>
              <div class="item-content" [ngClass]="{'limitTextHeight': isReadMore}">
                Event search harnesses the capabilities of SAR processing to monitor natural disasters.
              </div>
              <mat-card-actions (click)="onOpenDocs($event)">
                <app-docs-modal class="info-text"
                                text="More info"
                                url="https://docs.asf.alaska.edu/vertex/manual/#event-search-options">
                </app-docs-modal>
              </mat-card-actions>
            </div>
            <div class="fx25 menu-item-aside">
              <span class="material-icons-outlined menu-item-icon">volcano</span>
            </div>
          </div>
        </div>

        <hr class="dataset-hr">

        <div class="menu-item mat-menu-item"
          (click)="onSetSearchType(searchTypes.CUSTOM_PRODUCTS)"
          [ngClass]="{'disable-search-type-on-demand' : !isLoggedIn}">
          <div class="menu-item-inner">
            <div class="fx-75 menu-item-content">
              <div class="item-title">
                On Demand Products
                <span class="login-prompt" [ngClass]="{'login-hidden' : isLoggedIn}">
                  - Sign in to access
                </span>
              </div>
              <div class="item-content" [ngClass]="{'limitTextHeight': isReadMore}">
                On Demand search allows you to view your submitted On Demand jobs.
              </div>
              <mat-card-actions (click)="onOpenDocs($event)">
                <app-docs-modal
                  class="info-text"
                  text="More info"
                  url="https://docs.asf.alaska.edu/vertex/manual/#on-demand-products-search-options">
                </app-docs-modal>
              </mat-card-actions>
            </div>
            <div class="fx-25 menu-item-aside">
              <img src="assets/asf-logos/HyP3-graphic-only.png" class="menu-item-icon">
            </div>
          </div>
        </div>

        <hr class="dataset-hr">

        <div mat-menu-item class="menu-item mat-menu-item" [matMenuTriggerFor]="derivedDatasetMenu">
          <div class="menu-item-inner">
            <div class="fx-75 menu-item-content">
              <div class="item-title">
                Derived Datasets
              </div>
              <div class="item-content" [ngClass]="{'limitTextHeight': isReadMore}">
                Derived datasets contain a collection of datasets available to view and download.
              </div>
            </div>
            <div class="fx-25 menu-item-aside">
              <span class="material-icons-outlined menu-item-icon">dataset_linked</span>
            </div>
          </div>
        </div>
      </div>
    </mat-menu>

    <mat-menu #derivedDatasetMenu="matMenu">
      <div mat-menu-item matSuffix *ngFor="let dataset of datasets; last as isLast"
      (click)="onOpenDerivedDataset(dataset.info_url, dataset.name); $event.stopPropagation();">
        <div class="menu-item">
          <div class="menu-item-inner">
            <div class="fx-75 menu-item-content">
              <div class="item-title" (click)="onOpenDerivedDataset(dataset.info_url, dataset.name)">
                {{ dataset.name }}
              </div>
              <div class="item-content" [ngClass]="{'limitTextHeight': isReadMore}">
                {{ dataset.info }}
              </div>
              <mat-card-actions>
                <button class="blue-link" (click)="onOpenDerivedDataset(dataset.info_url, dataset.name)" mat-button>More Info</button>
                <button class="blue-link" (click)="onOpenDerivedDataset(dataset.download_url, dataset.name)" mat-button>Download</button>
              </mat-card-actions>
            </div>
            <div class="fx-75 menu-item-aside">
              <img [src]="dataset.picture" (click)="onOpenDerivedDataset(dataset.info_url, dataset.name)" class="menu-item-icon">
            </div>
          </div>
        </div>
        <hr *ngIf="!isLast" class="dataset-hr">
      </div>
    </mat-menu>

  </div>
</div>
