<ng-container *ngIf="numberOfScenes$ | async as numberOfScenes">
  <ng-container *ngIf="breakpoint$ | async as breakpoint">
    <div [className]="searchType === SearchTypes.BASELINE && breakpoint > breakpoints.MOBILE ?
                                        'files-header-baseline' : 'files-header mobile-size'">
      <div class="header-row-left"
           [ngClass]="{'sbas-header-row-left': searchType === SearchTypes.SBAS, 'mobile-size': breakpoint <= breakpoints.SMALL}">

        <div *ngIf="searchType === SearchTypes.DATASET || searchType === SearchTypes.LIST" class="mr-10 scene-count">
          {{ numberOfScenes }} Scene{{ numberOfScenes === 1 ? '' : 's' }}
          <span style="font-size: small;">
            <br>
            ({{ numberOfProducts$ | async }} of
            {{ formatNumber(totalResultCount$ | async) }}
            File{{ (numberOfProducts$ | async) === 1 ? '' : 's' }})
          </span>
        </div>

        <div *ngIf="searchType === SearchTypes.SBAS" class="mr-10" style="margin-top: -15px;">
          {{ numPairs$ | async }} Pair{{ (numPairs$ | async) === 1 ? '' : 's' }}
          <span *ngIf="breakpoint > breakpoints.MEDIUM" style="font-size: small;">
            <br>
            ({{ sbasProducts.length }} Scene{{ sbasProducts.length === 1 ? '' : 's' }})
          </span>
        </div>

        <div *ngIf="searchType === SearchTypes.BASELINE" class="mr-10">
          {{ numBaselineScenes$ | async }} Scene{{ (numBaselineScenes$ | async) === 1 ? '' : 's' }}
        </div>

        <div *ngIf="searchType === SearchTypes.CUSTOM_PRODUCTS" class="mr-10">
          {{ numBaselineScenes$ | async }} Product{{ (numBaselineScenes$ | async) === 1 ? '' : 's' }}
        </div>

        <div class="space-filler"></div>

        <div *ngIf="allProducts$ | async as products">

          <div *ngIf="canHideRawData" fxFlex="" class="list-button-group">
            <div fxLayout="row" fxLayoutAlign="center" class="button-group-label">
              <label>Raw</label>
            </div>
            <div fxLayout="row">
              <div>
                <mat-button-toggle-group fxFlex="" name="layerType" class="mr-10">
                  <mat-button-toggle (click)="onToggleS1RawData()" class="control-mat-button-toggle">
                    <mat-icon
                              class="clickable noselect list-icon"
                              [class.material-icons-outlined]="showS1RawData"
                              [matTooltip]="showS1RawData ? 'Hide raw data' : 'Show raw data'">
                              remove_red_eye
                    </mat-icon>
                  </mat-button-toggle>
                </mat-button-toggle-group>
              </div>
            </div>
          </div>

          <div *ngIf="canHideExpiredData" fxFlex="" class="list-button-group">
            <div fxLayout="row" fxLayoutAlign="center" class="button-group-label">
              <label>Expired</label>
            </div>
            <div fxLayout="row">
              <div>
                <mat-button-toggle-group fxFlex="" name="layerType" class="mr-10">
                  <mat-button-toggle (click)="onToggleExpiredData()" class="control-mat-button-toggle">
                    <mat-icon
                              class="clickable noselect list-icon"
                              [class.material-icons-outlined]="showExpiredData"
                              [matTooltip]="showExpiredData ? 'Hide expired products' : 'Show expired products'">
                              remove_red_eye
                    </mat-icon>
                  </mat-button-toggle>
                </mat-button-toggle-group>
              </div>
            </div>
          </div>

          <div fxFlex="" class="list-button-group">
            <div fxLayout="row" fxLayoutAlign="center" class="button-group-label">
              <label>Zoom</label>
            </div>
            <div fxLayout="row">
              <div>
                <mat-button-toggle-group fxFlex="" name="layerType" class="mr-10">
                  <mat-button-toggle (click)="onZoomToResults()" class="control-mat-button-toggle">
                    <mat-icon
                      class="clickable noselect list-icon"
                      matTooltip="Zoom to results">
                        settings_overscan
                    </mat-icon>
                  </mat-button-toggle>
                </mat-button-toggle-group>
              </div>
            </div>
          </div>

          <div fxFlex="" class="list-button-group">
            <div fxLayout="row" fxLayoutAlign="center" class="button-group-label">
              <label>Queue</label>
            </div>
            <div fxLayout="row">
              <div>
                <mat-button-toggle-group fxFlex="" name="layerType" class="mr-10">
                  <mat-button-toggle class="control-mat-button-toggle">
                    <mat-icon
                      class="clickable noselect list-icon"
                      matTooltip="Add all results to downloads"
                      [matMenuTriggerFor]="addAllProducts">
                      add_shopping_cart
                    </mat-icon>
                  </mat-button-toggle>
                </mat-button-toggle-group>
              </div>
            </div>
          </div>

          <div *ngIf="
            searchType !== SearchTypes.CUSTOM_PRODUCTS &&
            (slc(products).length > 0 || grd_hd(products).length > 0 || grd_hs(products).length > 0)"
            fxFlex="" class="list-button-group">
            <div fxLayout="row" fxLayoutAlign="center" class="button-group-label">
              <label>On Demand</label>
            </div>
            <div fxLayout="row">
              <div>
                <mat-button-toggle-group fxFlex="" name="layerType" class="mr-10">
                  <mat-button-toggle class="control-mat-button-toggle">
                    <mat-icon
                      class="clickable noselect list-icon"
                      matTooltip="Add all results to On Demand queue"
                      svgIcon="hyp3"
                      [matMenuTriggerFor]="addAllOnDemand">
                    </mat-icon>
                  </mat-button-toggle>
                </mat-button-toggle-group>
              </div>
            </div>
          </div>

          <div *ngIf="searchType === SearchTypes.BASELINE" fxFlex="" class="list-button-group">
            <div fxLayout="row" fxLayoutAlign="center" class="button-group-label">
              <label>Export</label>
            </div>
            <div fxLayout="row">
              <div>
                <mat-button-toggle-group fxFlex="" name="layerType" class="mr-10">
                  <mat-button-toggle class="control-mat-button-toggle">
                    <mat-icon
                      class="clickable noselect list-icon"
                      matTooltip="Download data/metadata as"
                      [matMenuTriggerFor]="ExportAll"
                    >
                      get_app
                    </mat-icon>
                  </mat-button-toggle>
                </mat-button-toggle-group>
              </div>
            </div>
          </div>

          <div *ngIf="searchType === SearchTypes.SBAS" fxFlex="" class="list-button-group">
            <div fxLayout="row" fxLayoutAlign="center" class="button-group-label">
              <label>Pairs</label>
            </div>
            <div fxLayout="row">
              <div>
                <mat-button-toggle-group fxFlex="" name="layerType" class="mr-10">
                  <mat-button-toggle
                    (click)="onDownloadPairCSV()"
                    class="control-mat-button-toggle">
                      <mat-icon
                        class="clickable noselect list-icon"
                        matTooltip="Download Pair CSV">
                        get_app
                      </mat-icon>
                  </mat-button-toggle>
                </mat-button-toggle-group>
              </div>
            </div>
          </div>

          <mat-menu #addAllProducts="matMenu">
            <button *ngIf="searchType !== SearchTypes.SBAS" (click)="queueAllProducts(products)" mat-menu-item>
              Add {{ downloadable(products).length }} file{{ downloadable(products).length === 1 ? '' : 's'}} to downloads
            </button>

            <button *ngIf="searchType === SearchTypes.SBAS" (click)="queueSBASProducts(sbasProducts)" mat-menu-item>
              Add {{ sbasProducts.length }} file{{ sbasProducts.length === 1 ? '' : 's'}} to downloads
            </button>
          </mat-menu>

          <mat-menu #addAllOnDemand="matMenu">
            <button [matMenuTriggerFor]="addAllRTCDemand" mat-menu-item>
              RTC Gamma
            </button>
          </mat-menu>

          <mat-menu #addAllRTCDemand="matMenu">
            <button *ngIf="slc(products).length > 0" (click)="queueAllOnDemand(slc(products))" mat-menu-item>
              Add {{ slc(products).length }} SLC jobs
            </button>
            <button *ngIf="grd_hd(products).length > 0" (click)="queueAllOnDemand(grd_hd(products))" mat-menu-item>
              Add {{ grd_hd(products).length }} GRD-HD jobs
            </button>
            <button *ngIf="grd_hs(products).length > 0" (click)="queueAllOnDemand(grd_hs(products))" mat-menu-item>
              Add {{ grd_hs(products).length }} GRD-HS jobs
            </button>
          </mat-menu>

          <mat-menu #ExportAll="matMenu">
            <button mat-menu-item [matMenuTriggerFor]="ExportAllMetadata">
              Metadata
            </button>
            <button mat-menu-item [matMenuTriggerFor]="ExportAllData">
              Data
            </button>
          </mat-menu>

        </div>
      </div>

      <mat-menu #ExportAllMetadata="matMenu">
        <div *ngIf="allProducts$ | async as products">
          <button (click)="onCsvDownload(products)" mat-menu-item>
            csv
          </button>
          <button (click)="onGeojsonDownload(products)" mat-menu-item>
            geojson
          </button>
          <button (click)="onKmlDownload(products)" mat-menu-item>
          kml
        </button>
      </div>
      </mat-menu>

      <mat-menu #ExportAllData="matMenu">
        <div *ngIf="allProducts$ | async as products">
          <button (click)="onMakeDownloadScript(products)" mat-menu-item>
            python (.py)
          </button>
          <button (click)="onMetalinkDownload(products)" mat-menu-item>
          metalink
        </button>
      </div>
      </mat-menu>

      <ng-container *ngIf="searchType === SearchTypes.BASELINE">
        <div class="header-row-right" *ngIf="breakpoint > breakpoints.MOBILE">
          <div (click)="onTogglePerpendicularSort()" class="header-column noselect clickable">
              meters
              <mat-icon *ngIf="perpendicularSort === SortDirection.NONE"
                class="sort-icon">unfold_more</mat-icon>
              <mat-icon *ngIf="perpendicularSort === SortDirection.INCREASING"
                class="sort-icon sort-active">keyboard_arrow_up</mat-icon>
              <mat-icon *ngIf="perpendicularSort === SortDirection.DECREASING"
                class="sort-icon sort-active">keyboard_arrow_down</mat-icon>
          </div>
          <div (click)="onToggleTemporalSort()" class="header-column clickable noselect">
              days
              <mat-icon *ngIf="temporalSort === SortDirection.NONE"
                class="sort-icon">unfold_more</mat-icon>
              <mat-icon *ngIf="temporalSort === SortDirection.INCREASING"
                class="sort-icon sort-active">keyboard_arrow_up</mat-icon>
              <mat-icon *ngIf="temporalSort === SortDirection.DECREASING"
                class="sort-icon sort-active">keyboard_arrow_down</mat-icon>
          </div>
          <div class="header-column header-cart">
          </div>
        </div>
      </ng-container>

    </div>
  </ng-container>

</ng-container>
