<!-- SCENE LIST -->
<ng-container *ngIf="breakpoint > breakpoints.MEDIUM">
  <mat-card class="mp0" fxFlex="38" fxFlex>
    <mat-card-subtitle class="header">
      <app-scenes-list-header></app-scenes-list-header>
    </mat-card-subtitle>

    <div class="app-scene-list">
      <app-scenes-list [resize$]="resize$"></app-scenes-list>
    </div>
  </mat-card>

  <mat-card class="mp0 no-box-shadow" fxFlex="21" fxFlexFill>
    <mat-card-subtitle class="header"> Scene Detail </mat-card-subtitle>

    <app-scene-detail></app-scene-detail>
  </mat-card>
</ng-container>

<ng-container *ngIf="breakpoint <= breakpoints.MEDIUM">
  <mat-card *ngIf="view === Views.LIST" class="mp0" fxFlex="45" fxFlex>
    <mat-card-subtitle class="header medium-header">
      <div>
        <div fxFlex="" class="list-button-group">
          <div fxLayout="row" fxLayoutAlign="center" class="button-group-label">
            &nbsp;
          </div>
          <div fxLayout="row">
            <div>
              <span fxFlex="" class="mr-10">
                <span class="control-mat-button-toggle scene-text">
                  {{ numBaselineScenes$ | async }} Scene{{
                    (numBaselineScenes$ | async) === 1 ? "" : "s"
                  }}
                </span>
              </span>
            </div>
          </div>
        </div>
        <div fxFlex="" class="list-button-group">
          <div fxLayout="row" fxLayoutAlign="center" class="button-group-label">
            <label>Zoom</label>
          </div>
          <div fxLayout="row">
            <div>
              <mat-button-toggle-group fxFlex="" name="layerType" class="mr-10">
                <mat-button-toggle
                  (click)="onZoomToResults()"
                  class="control-mat-button-toggle"
                >
                  <mat-icon
                    class="clickable noselect list-icon"
                    matTooltip="Zoom to results"
                  >
                    settings_overscan
                  </mat-icon>
                </mat-button-toggle>
              </mat-button-toggle-group>
            </div>
          </div>
        </div>
        <div fxFlex="" class="list-button-group">
          <div fxLayout="row" fxLayoutAlign="center" class="button-group-label">
            <label>Queue</label>
          </div>
          <div fxLayout="row">
            <div>
              <mat-button-toggle-group fxFlex="" name="layerType" class="criteria-button-group">
                <mat-button-toggle class="control-mat-button-toggle">
                  <mat-icon
                    class="clickable noselect list-icon"
                    matTooltip="Add all results to downloads"
                    [matMenuTriggerFor]="addAllProducts"
                  >
                    add_shopping_cart
                  </mat-icon>
                </mat-button-toggle>
              </mat-button-toggle-group>
            </div>
          </div>
        </div>

        <div *ngIf="allProducts$ | async as products">

          <div *ngIf="
          searchType !== SearchTypes.CUSTOM_PRODUCTS" fxFlex="" class="list-button-group">
            <div fxLayout="row" fxLayoutAlign="center" class="button-group-label">
              <label>On Demand</label>
            </div>
            <div fxLayout="row" fxLayoutAlign="center">
              <div>
                <mat-button-toggle-group fxFlex="" name="layerType" class="mr-10">
                  <mat-button-toggle class="control-mat-button-toggle">
                    <mat-icon
                      class="clickable noselect list-icon"
                      matTooltip="Add all results to On Demand queue"
                      svgIcon="hyp3"
                      [matMenuTriggerFor]="addAllOnDemand">
                    </mat-icon>
                  </mat-button-toggle>
                </mat-button-toggle-group>
              </div>
            </div>
          </div>

          <mat-menu #addAllOnDemand>
            <div [matTooltip]="
            hyp3able(grd_hd(products)).length === 0 && hyp3able(grd_hs(products)).length === 0 
            ? 'No compatible RTC Gamma Products' : ''">
              <button [matMenuTriggerFor]="addAllRTCDemand"
              [disabled]="hyp3able(grd_hd(products)).length === 0 && hyp3able(grd_hs(products)).length"
              mat-menu-item>
                RTC Gamma
              </button>
            </div>
            <div [matTooltip]="hyp3able(slc(products)).length === 0 ? 'No compatible InSAR Gamma Products' : ''">
              <button [matMenuTriggerFor]="addAllInSARDemand"
              [disabled]="hyp3able(slc(products)).length === 0" 
              mat-menu-item>
                InSAR Gamma
              </button>
            </div>
          </mat-menu>

          <mat-menu #addAllRTCDemand>
            <button
              (click)="queueAllOnDemand(grd_hd(products), RTC)" mat-menu-item>
              Add {{ hyp3able(grd_hd(products)).length }} GRD-HD jobs
            </button>
            <button
            (click)="queueAllOnDemand(grd_hs(products), RTC)" mat-menu-item>
            Add {{ hyp3able(grd_hs(products)).length }} GRD-HS jobs
          </button>
          </mat-menu>

          <mat-menu #addAllInSARDemand>
            <button          
              (click)="queueAllOnDemand(slc(products), InSAR)" mat-menu-item>
              Add {{ hyp3able(slc(products)).length }} SLC jobs
            </button>
            <button          
            (click)="queueAllOnDemand(slc(products), AutoRift)" mat-menu-item>
            Add {{ hyp3able(slc(products)).length }} AUTORift jobs
          </button>
          </mat-menu>

        </div>

        <div fxFlex="" class="list-button-group">
          <div fxLayout="row" fxLayoutAlign="center" class="button-group-label">
            <label>Export</label>
          </div>
          <div fxLayout="row">
            <div>
              <mat-button-toggle-group fxFlex="" name="layerType" class="mr-10">
                <mat-button-toggle class="control-mat-button-toggle">
                  <mat-icon
                    class="clickable noselect list-icon"
                    matTooltip="Download data/metadata as"
                    [matMenuTriggerFor]="ExportAll"
                  >
                    get_app
                  </mat-icon>
                </mat-button-toggle>
              </mat-button-toggle-group>
            </div>
          </div>
        </div>

        <mat-menu #addAllProducts="matMenu">
          <div *ngIf="allProducts$ | async as products">
            <button (click)="queueAllProducts(products)" mat-menu-item>
              Add {{ downloadable(products).length }} file{{
                downloadable(products).length === 1 ? "" : "s"
              }}
              to_downloads
            </button>
          </div>
        </mat-menu>



        <mat-menu #ExportAll="matMenu">
          <button mat-menu-item [matMenuTriggerFor]="ExportAllMetadata">
            Metadata
          </button>
          <button mat-menu-item [matMenuTriggerFor]="ExportAllData">
            Data
          </button>
        </mat-menu>

        <mat-menu #ExportAllMetadata="matMenu">
          <div *ngIf="allProducts$ | async as products">
            <button (click)="onCsvDownload(products)" mat-menu-item>
              csv
            </button>
            <button (click)="onGeojsonDownload(products)" mat-menu-item>
              geojson
            </button>
            <button (click)="onKmlDownload(products)" mat-menu-item>
            kml
          </button>
        </div>
        </mat-menu>

        <mat-menu #ExportAllData="matMenu">
          <div *ngIf="allProducts$ | async as products">
            <button (click)="onMakeDownloadScript(products)" mat-menu-item>
              python (.py)
            </button>
            <button (click)="onMetalinkDownload(products)" mat-menu-item>
            metalink
          </button>
        </div>
        </mat-menu>

        <div class="button-tabs">
          <button
            (click)="onSelectList()"
            [class.selected]="view === Views.LIST"
            mat-button
          >
            Scenes
          </button>
          <button
            (click)="onSelectDetail()"
            [class.selected]="view === Views.DETAIL"
            mat-button
          >
            Scene Detail
          </button>
        </div>
      </div>
    </mat-card-subtitle>

    <div class="app-scene-list">
      <app-scenes-list [resize$]="resize$"></app-scenes-list>
    </div>
  </mat-card>

  <mat-card
    *ngIf="view === Views.DETAIL"
    class="mp0 no-box-shadow"
    fxFlex="45"
    fxFlexFill
  >
    <mat-card-subtitle class="header medium-header">
      <div>
        <button
          (click)="onSelectList()"
          [class.selected]="view === Views.LIST"
          mat-button
        >
          Scenes
        </button>
        <button
          (click)="onSelectDetail()"
          [class.selected]="view === Views.DETAIL"
          mat-button
        >
          Scene Detail
        </button>
      </div>
    </mat-card-subtitle>

    <app-scene-detail></app-scene-detail>
  </mat-card>
</ng-container>

<mat-card
  class="mp0 no-box-shadow"
  [fxFlex]="breakpoint <= breakpoints.MEDIUM ? 55 : 45"
  fxFlexFill
>
  <mat-card-subtitle
    [class.medium-header]="breakpoint <= breakpoints.MEDIUM"
    class="header"
  >
    <div class="baseline-header-button-group">
      <mat-button-toggle-group fxFlex="" name="baselineCriteria"
                               class="criteria-button-group baseline-criteria-button-toggle-group">
        <mat-button-toggle class="control-mat-button-toggle baseline-criteria-button-toggle"
                           (click)="onToggleFiltersMenu()"
                           >
          Baseline Criteria<mat-icon class="more-horiz">more_horiz</mat-icon>
        </mat-button-toggle>
      </mat-button-toggle-group>
    </div>
  </mat-card-subtitle>
  <app-baseline-chart></app-baseline-chart>
</mat-card>
